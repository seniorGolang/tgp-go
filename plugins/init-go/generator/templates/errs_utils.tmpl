package errs

import (
	"context"
	"fmt"
	"net/http"

	"github.com/rs/zerolog/log"
)

func PanicOnError(ctx context.Context, err error, msg string) {

	if err != nil {
		log.Ctx(ctx).Panic().Err(err).Msg(msg)
	}
}

func CodeToError(code int, errMessage string) (err error) {

	switch code {
	case http.StatusBadRequest:
		return BadRequest.SetCauseRaw(errMessage)
	case http.StatusUnauthorized:
		return Unauthorized.SetCauseRaw(errMessage)
	case http.StatusForbidden:
		return Forbidden.SetCauseRaw(errMessage)
	case http.StatusNotFound:
		return NotFound.SetCauseRaw(errMessage)
	case http.StatusConflict:
		return Conflict.SetCauseRaw(errMessage)
	case http.StatusInternalServerError:
		return Internal.SetCauseRaw(errMessage)
	case http.StatusNotImplemented:
		return NotImplemented.SetCauseRaw(errMessage)
	default:
		return fmt.Errorf("HTTP Code: %d, Message: %s", code, errMessage)
	}
}
